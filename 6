---
- name: Automate with Hostname
  hosts: all
  gather_facts: yes  # Ensures that facts are gathered, including the hostname

  tasks:
    - name: Print the hostname
      ansible.builtin.debug:
        msg: "The hostname is {{ ansible_hostname }}."

    - name: Create a file named after the hostname
      ansible.builtin.file:
        path: "/tmp/{{ ansible_hostname }}_output.txt"
        state: touch

    - name: Run a command using the hostname
      ansible.builtin.shell: |
        echo "This is {{ ansible_hostname }}" > /tmp/{{ ansible_hostname }}_details.txt
